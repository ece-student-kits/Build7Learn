"use strict";(globalThis.webpackChunkstm_32_documentaion=globalThis.webpackChunkstm_32_documentaion||[]).push([[3538],{7075(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"STM32/LM35/Code","title":"Code","description":"Task: Interface an LM35 sensor to measure the temperature and display in the Serial Console","source":"@site/docs/STM32/LM35/Code.md","sourceDirName":"STM32/LM35","slug":"/STM32/LM35/Code","permalink":"/Build7Learn/docs/STM32/LM35/Code","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/STM32/LM35/Code.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"AnalogSensors: LM35","permalink":"/Build7Learn/docs/STM32/LM35/"},"next":{"title":"PWM","permalink":"/Build7Learn/docs/STM32/PWM_LED/"}}');var r=t(4848),a=t(8453);const o={sidebar_position:2},i="Code",l={},c=[{value:"Step 1: Create a STM32 Project &quot;LM35&quot;",id:"step-1-create-a-stm32-project-lm35",level:3},{value:"Step 2: Configure GPIO Pins",id:"step-2-configure-gpio-pins",level:3},{value:"Step 3: Code Snippet to read temperature using LM35 Sensor, and display in the Serial Console",id:"step-3-code-snippet-to-read-temperature-using-lm35-sensor-and-display-in-the-serial-console",level:3}];function d(e){const n={code:"code",h1:"h1",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"code",children:"Code"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"Task: Interface an LM35 sensor to measure the temperature and display in the Serial Console"})}),"\n",(0,r.jsx)(n.h3,{id:"step-1-create-a-stm32-project-lm35",children:'Step 1: Create a STM32 Project "LM35"'}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Create a new project & initialize all pheripherals in default configuration"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"step-2-configure-gpio-pins",children:"Step 2: Configure GPIO Pins"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Image",src:t(1093).A+"",width:"737",height:"289"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"PA0"})," as ",(0,r.jsx)(n.code,{children:"ADC1_INT0"})," (A0 Pin, SensorValue)"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"PA2"})," as ",(0,r.jsx)(n.code,{children:"USART_TX"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"PA3"})," as ",(0,r.jsx)(n.code,{children:"USART_RX"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"step-3-code-snippet-to-read-temperature-using-lm35-sensor-and-display-in-the-serial-console",children:"Step 3: Code Snippet to read temperature using LM35 Sensor, and display in the Serial Console"}),"\n",(0,r.jsxs)(n.p,{children:["Paste the following code snippet inside the ",(0,r.jsx)(n.code,{children:"/* USER CODE BEGIN Includes */"})," loop in ",(0,r.jsx)(n.code,{children:"main.c"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:'#include "stdio.h"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Paste the following code snippet inside the ",(0,r.jsx)(n.code,{children:"/* USER CODE BEGIN 2 */"})," loop in ",(0,r.jsx)(n.code,{children:"main.c"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"// adc_value variable store the adc value,\n// value variable store the temperature value\nint adc_value, value;\n// store the converted voltage value from analog value\nfloat voltage;\n\nint calibration_offset = 0;  // Calibrate the difference between measured temperature and actual temperature\n\nint calibration_factor = 100; //10 mV per \xb0C, the factor will be 100 (1V = 1000 mV)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Paste the following code snippet inside the ",(0,r.jsx)(n.code,{children:"while (1)"})," loop in ",(0,r.jsx)(n.code,{children:"main.c"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:'// start ADC convertion\nHAL_ADC_Start(&hadc1);\n// ADC poll for conversion\nHAL_ADC_PollForConversion(&hadc1, 100);\n// get the ADC conversion value\nadc_value = HAL_ADC_GetValue(&hadc1);\n// end ADC convertion\nHAL_ADC_Stop(&hadc1);\n// convert ADC value into voltage\nvoltage = (adc_value*3.3)/4096;\n// convert the voltage into temperature\nvalue = (voltage * calibration_factor) + calibration_offset;\n\n// Format the complete message to send\nchar message[20]; // Buffer to hold the complete message to print\nsprintf(message, "Temperature: %d C \\n\\r", value);\n\n// Transmit the message over UART\nHAL_UART_Transmit(&huart2, (uint8_t*)message, strlen(message), 10);\nHAL_Delay(1000);\n'})})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},1093(e,n,t){t.d(n,{A:()=>s});const s=t.p+"assets/images/2-fae73ebd8157ea70c702caa3de37241a.png"},8453(e,n,t){t.d(n,{R:()=>o,x:()=>i});var s=t(6540);const r={},a=s.createContext(r);function o(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);